<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Board - ë¦¬ë·° & ë©”ëª¨ ê²Œì‹œíŒ</title>
  <link rel="stylesheet" href="../css/boardstyle.css" />
</head>
<body>

  <nav>
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li><a href="category.html">Category</a></li>
      <li><a href="summary.html">summary</a></li>
      <li><a href="background.html">background</a></li>
      <li><a href="board.html">board</a></li>
    </ul>
  </nav>

  <header>
    <h1>ğŸ’¬ ë¦¬ë·° & ë©”ëª¨ ê²Œì‹œíŒ</h1>
    <p>ììœ ë¡­ê²Œ ë¦¬ë·°ì™€ ë©”ëª¨ë¥¼ ê³µìœ í•´ë³´ì„¸ìš”.</p>
  </header>

  <main>
    <form id="post-form">
      <input type="text" id="post-title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required />
      <br />
      <textarea id="post-content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="5" required></textarea>
      <br />
      <button type="submit">ê²Œì‹œí•˜ê¸°</button>
    </form>

    <section class="posts" id="posts">
      <p>ì‘ì„±ëœ ë¦¬ë·° ë° ë©”ëª¨ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('post-form');
      const postsContainer = document.getElementById('posts');

      const STORAGE_KEY = 'boardPosts';

      function loadPosts() {
        const savedPosts = localStorage.getItem(STORAGE_KEY);
        if (savedPosts) {
          const posts = JSON.parse(savedPosts);
          postsContainer.innerHTML = '';
          posts.forEach(({title, content}) => {
            addPostElement(title, content);
          });
        } else {
          postsContainer.innerHTML = '<p>ì‘ì„±ëœ ë¦¬ë·° ë° ë©”ëª¨ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
        }
      }

      function savePosts() {
        const posts = [];
        postsContainer.querySelectorAll('.post').forEach(postEl => {
          const title = postEl.querySelector('h3').textContent;
          const content = postEl.querySelector('p').textContent;
          posts.push({title, content});
        });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));
      }

      function addPostElement(title, content) {
        if (postsContainer.children.length === 1 && postsContainer.children[0].tagName === 'P') {
          postsContainer.innerHTML = '';
        }

        const postDiv = document.createElement('div');
        postDiv.classList.add('post');

        const postTitle = document.createElement('h3');
        postTitle.textContent = title;

        const postContent = document.createElement('p');
        postContent.textContent = content;

        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'ì‚­ì œ';
        deleteBtn.classList.add('delete-btn');
        deleteBtn.type = 'button';

        deleteBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          if (confirm('ì´ ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            postDiv.remove();
            savePosts();
            if (postsContainer.children.length === 0) {
              postsContainer.innerHTML = '<p>ì‘ì„±ëœ ë¦¬ë·° ë° ë©”ëª¨ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
            }
          }
        });

        postDiv.addEventListener('click', () => {
          postDiv.classList.toggle('expanded');
        });

        postDiv.appendChild(postTitle);
        postDiv.appendChild(postContent);
        postDiv.appendChild(deleteBtn);

        postsContainer.prepend(postDiv);
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();

        const titleInput = document.getElementById('post-title');
        const contentInput = document.getElementById('post-content');

        const title = titleInput.value.trim();
        const content = contentInput.value.trim();

        if (!title || !content) {
          alert('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }

        addPostElement(title, content);
        savePosts();

        titleInput.value = '';
        contentInput.value = '';
      });

      loadPosts();
    });
  </script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.body.addEventListener('mousedown', function (e) {
      e.preventDefault();
    });
    document.body.addEventListener('selectstart', function (e) {
      e.preventDefault();
    });
  });
</script>

</body>
</html>
